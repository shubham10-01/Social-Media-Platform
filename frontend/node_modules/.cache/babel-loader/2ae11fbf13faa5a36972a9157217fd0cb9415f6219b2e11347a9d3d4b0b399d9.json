{"ast":null,"code":"import React,{useEffect,useState}from'react';import'../css/Profile.css';import PostDetail from'./PostDetail';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserProfile(){const{userid}=useParams();var picLink=\"https://cdn-icons-png.flaticon.com/128/847/847969.png\";const[pic,setPic]=useState([]);console.log(userid);const[user,setUser]=useState(\"\");const[posts,setPosts]=useState([]);const[isFollow,setisFollow]=useState(false);// to follow user\nconst followUser=userId=>{fetch(\"/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(res=>res.json()).then(data=>{console.log(data);setisFollow(true);});};// to unfollow user\nconst unfollowUser=userId=>{fetch(\"/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(res=>res.json(res)).then(data=>{console.log(data);setisFollow(false);});};useEffect(()=>{fetch(\"/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{console.log(result);setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setisFollow(true);}});},[isFollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:()=>{if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:posts.length}),\" Posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:user.followers?user.followers.length:\"0\"}),\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:user.following?user.following.length:\"0\"}),\" Following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(pic=>{return/*#__PURE__*/_jsx(\"img\",{src:pic.photo,alt:\"\",className:\"item\"},pic._id);})})]});}export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","PostDetail","useParams","jsx","_jsx","jsxs","_jsxs","UserProfile","userid","picLink","pic","setPic","console","log","user","setUser","posts","setPosts","isFollow","setisFollow","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","unfollowUser","concat","result","post","followers","includes","parse","_id","className","children","src","Photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","opacity","margin","map","photo"],"sources":["D:/Social Media App/backend/frontend/src/components/UserProfile.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport '../css/Profile.css'\r\nimport PostDetail from './PostDetail'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nfunction UserProfile() {\r\n\r\nconst {userid} = useParams()\r\nvar picLink = \"https://cdn-icons-png.flaticon.com/128/847/847969.png\" \r\n  const [pic, setPic] = useState([])\r\n  console.log(userid)\r\n  const [user, setUser] = useState(\"\")\r\n  const [posts, setPosts] = useState([])\r\n  const [isFollow, setisFollow] = useState(false)\r\n\r\n  // to follow user\r\n  const followUser = (userId) => {\r\n    fetch(\"/follow\",{\r\n      method:\"put\",\r\n      headers:{\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n      body:JSON.stringify({\r\n        followId:userId,\r\n      }),\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(data)\r\n      setisFollow(true)\r\n    })\r\n  }\r\n\r\n  // to unfollow user\r\n  const unfollowUser = (userId) => {\r\n    fetch(\"/unfollow\",{\r\n      method:\"put\",\r\n      headers:{\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n      body:JSON.stringify({\r\n        followId:userId\r\n      })\r\n    })\r\n    .then((res) => res.json(res))\r\n    .then((data) => {\r\n      console.log(data)\r\n      setisFollow(false)\r\n    })\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${userid}`, {\r\n      headers:{\r\n       Authorization : \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then((result) => {\r\n        console.log(result)\r\n      setUser(result.user)\r\n      setPosts(result.post)\r\n      if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){\r\n        setisFollow(true)\r\n      }\r\n    })\r\n  }, [isFollow])\r\n  \r\n\r\n  return (\r\n    <div className='profile'>\r\n      {/* Profile frame */}\r\n      <div className=\"profile-frame\">\r\n        {/* Profile-pic */}\r\n        <div className=\"profile-pic\">\r\n          <img src={user.Photo ? user.Photo : picLink} alt=\"\" />\r\n        </div>\r\n        {/* Profile-data */}\r\n        <div className=\"profile-data\">\r\n          <div style={{display:\"flex\", alignItems:\"center\", justifyContent:\"space-between\"}}>\r\n            <h1>{user.name}</h1>\r\n            <button className='followBtn' onClick={() => {\r\n              if(isFollow){\r\n                unfollowUser(user._id)\r\n              }\r\n              else{\r\n                followUser(user._id)\r\n              }\r\n            }}>{isFollow ? \"Unfollow\" : \"Follow\"}</button>\r\n          </div>\r\n          <div className=\"profile-info\" style={{display: \"flex\"}}>\r\n            <p><b>{posts.length}</b> Posts</p>\r\n            <p><b>{user.followers? user.followers.length : \"0\"}</b> Followers</p>\r\n            <p><b>{user.following? user.following.length : \"0\"}</b> Following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr style={{\r\n        width: \"90%\", \r\n        opacity:\"0.8\",\r\n        margin: \"25px auto\"\r\n      }}/>\r\n      {/* Gallery */}\r\n      <div className=\"gallery\">\r\n        {posts.map((pic) => {\r\n          return <img key={pic._id} src={pic.photo} alt='' className='item'></img>\r\n        })}\r\n      </div>\r\n      {/* {show && \r\n        <PostDetail item={posts} toggleDetails = {toggleDetails}/>\r\n      } */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProfile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}