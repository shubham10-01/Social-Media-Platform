{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../css/Profile.css\";import PostDetail from\"./PostDetail\";import ProfilePic from\"./ProfilePic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){var picLink=\"https://cdn-icons-png.flaticon.com/128/847/847969.png\";const[pic,setPic]=useState([]);const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[changePic,setChangepic]=useState(false);const[user,setUser]=useState(\"\");const toggleDetails=posts=>{if(show){setShow(false);}else{setShow(true);setPosts(posts);}};const changeProfile=()=>{if(changePic){setChangepic(false);}else{setChangepic(true);}};useEffect(()=>{fetch(\"/user/\".concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{setPic(result.post);setUser(result.user);console.log(pic);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:()=>{changeProfile();},src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem(\"user\")).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" Posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" Following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:pic.map(pic=>{return/*#__PURE__*/_jsx(\"img\",{src:pic.photo,alt:\"\",onClick:()=>{toggleDetails(pic);},className:\"item\"},pic._id);})}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,toggleDetails:toggleDetails}),changePic&&/*#__PURE__*/_jsx(ProfilePic,{changeProfile:changeProfile})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","PostDetail","ProfilePic","jsx","_jsx","jsxs","_jsxs","Profile","picLink","pic","setPic","show","setShow","posts","setPosts","changePic","setChangepic","user","setUser","toggleDetails","changeProfile","fetch","concat","JSON","parse","localStorage","getItem","_id","headers","Authorization","then","res","json","result","post","console","log","className","children","onClick","src","Photo","alt","name","style","display","length","followers","following","width","opacity","margin","map","photo","item"],"sources":["D:/Social Media App/backend/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"../css/Profile.css\";\r\nimport PostDetail from \"./PostDetail\";\r\nimport ProfilePic from \"./ProfilePic\";\r\n\r\nfunction Profile() {\r\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/847/847969.png\"\r\n  const [pic, setPic] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n  const [posts, setPosts] = useState([]);\r\n  const [changePic, setChangepic] = useState(false)\r\n  const [user, setUser] = useState(\"\")\r\n\r\n  const toggleDetails = (posts) => {\r\n    if (show) {\r\n      setShow(false);\r\n    } else {\r\n      setShow(true);\r\n      setPosts(posts);\r\n    }\r\n  };\r\n\r\n  const changeProfile = () => {\r\n    if(changePic){\r\n      setChangepic(false);\r\n    }\r\n    else{\r\n      setChangepic(true);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`, {\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setPic(result.post );\r\n        setUser(result.user) \r\n        console.log(pic);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {/* Profile frame */}\r\n      <div className=\"profile-frame\">\r\n        {/* Profile-pic */}\r\n        <div className=\"profile-pic\">\r\n          <img \r\n            onClick={() => {changeProfile()}}\r\n            src={user.Photo ? user.Photo : picLink}\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        {/* Profile-data */}\r\n        <div className=\"profile-data\">\r\n          <h1>{JSON.parse(localStorage.getItem(\"user\")).name}</h1>\r\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\r\n            <p>{pic ? pic.length : \"0\"} Posts</p>\r\n            <p>{user.followers? user.followers.length: \"0\"} Followers</p>\r\n            <p>{user.following? user.following.length: \"0\"} Following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr\r\n        style={{\r\n          width: \"90%\",\r\n          opacity: \"0.8\",\r\n          margin: \"25px auto\",\r\n        }}\r\n      />\r\n      {/* Gallery */}\r\n      <div className=\"gallery\">\r\n        {pic.map((pic) => {\r\n          return (\r\n            <img\r\n              key={pic._id}\r\n              src={pic.photo}\r\n              alt=\"\"\r\n              onClick={() => {\r\n                toggleDetails(pic);\r\n              }}\r\n              className=\"item\"\r\n            ></img>\r\n          );\r\n        })}\r\n      </div>\r\n      {show && <PostDetail item={posts} toggleDetails={toggleDetails} />}\r\n      {\r\n        changePic &&\r\n        <ProfilePic changeProfile={changeProfile}/>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}